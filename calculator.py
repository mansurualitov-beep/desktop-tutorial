"""
üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –∏—Å—Ç–æ—Ä–∏–µ–π –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
–ü—Ä–æ—Å—Ç–æ –≤–≤–æ–¥–∏ –ø—Ä–∏–º–µ—Ä—ã –∫–∞–∫ –≤ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ: 2 + 2, 10 * 5, sqrt(16)
"""

import math

# –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∑–∞ —Å–µ—Å—Å–∏—é
–∏—Å—Ç–æ—Ä–∏—è = []


def –≤—ã—á–∏—Å–ª–∏—Ç—å(–≤—ã—Ä–∞–∂–µ–Ω–∏–µ):
    """
    –°—á–∏—Ç–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è.
    –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç: + - * / ** –∏ —Ñ—É–Ω–∫—Ü–∏–∏ sqrt, sin, cos, log
    """
    # –†–∞–∑—Ä–µ—à–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
    –¥–æ—Å—Ç—É–ø–Ω—ã–µ_—Ñ—É–Ω–∫—Ü–∏–∏ = {
        "sqrt": math.sqrt,   # –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π –∫–æ—Ä–µ–Ω—å
        "sin":  math.sin,    # —Å–∏–Ω—É—Å
        "cos":  math.cos,    # –∫–æ—Å–∏–Ω—É—Å
        "tan":  math.tan,    # —Ç–∞–Ω–≥–µ–Ω—Å
        "log":  math.log,    # –ª–æ–≥–∞—Ä–∏—Ñ–º
        "pi":   math.pi,     # —á–∏—Å–ª–æ –ø–∏
        "e":    math.e,      # —á–∏—Å–ª–æ –≠–π–ª–µ—Ä–∞
        "abs":  abs,         # –º–æ–¥—É–ª—å —á–∏—Å–ª–∞
    }

    try:
        # eval –≤—ã—á–∏—Å–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É –∫–∞–∫ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
        —Ä–µ–∑—É–ª—å—Ç–∞—Ç = eval(–≤—ã—Ä–∞–∂–µ–Ω–∏–µ, {"__builtins__": {}}, –¥–æ—Å—Ç—É–ø–Ω—ã–µ_—Ñ—É–Ω–∫—Ü–∏–∏)
        return —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    except ZeroDivisionError:
        return "‚ùå –û—à–∏–±–∫–∞: –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å"
    except Exception:
        return "‚ùå –û—à–∏–±–∫–∞: –Ω–µ–≤–µ—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ"


def –ø–æ–∫–∞–∑–∞—Ç—å_–∏—Å—Ç–æ—Ä–∏—é():
    """–í—ã–≤–æ–¥–∏—Ç –≤—Å–µ –ø—Ä–æ—à–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è."""
    if not –∏—Å—Ç–æ—Ä–∏—è:
        print("  –ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞\n")
        return

    print("\nüìã –ò—Å—Ç–æ—Ä–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π:")
    print("‚îÄ" * 35)
    for i, (–≤—ã—Ä, —Ä–µ–∑) in enumerate(–∏—Å—Ç–æ—Ä–∏—è, 1):
        print(f"  {i}. {–≤—ã—Ä} = {—Ä–µ–∑}")
    print("‚îÄ" * 35 + "\n")


def –ø–æ–∫–∞–∑–∞—Ç—å_–ø–æ–º–æ—â—å():
    """–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π."""
    print("""
üìñ –î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
  + - * /         ‚Äî —Å–ª–æ–∂–µ–Ω–∏–µ, –≤—ã—á–∏—Ç–∞–Ω–∏–µ, —É–º–Ω–æ–∂–µ–Ω–∏–µ, –¥–µ–ª–µ–Ω–∏–µ
  **              ‚Äî —Å—Ç–µ–ø–µ–Ω—å (–Ω–∞–ø—Ä–∏–º–µ—Ä: 2**8)
  sqrt(x)         ‚Äî –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π –∫–æ—Ä–µ–Ω—å
  sin(x), cos(x) ‚Äî —Ç—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è
  log(x)          ‚Äî –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π –ª–æ–≥–∞—Ä–∏—Ñ–º
  abs(x)          ‚Äî –º–æ–¥—É–ª—å —á–∏—Å–ª–∞
  pi, e           ‚Äî –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

üí° –ö–æ–º–∞–Ω–¥—ã:
  –∏—Å—Ç–æ—Ä–∏—è         ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é
  –æ—á–∏—Å—Ç–∏—Ç—å        ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
  –ø–æ–º–æ—â—å          ‚Äî —ç—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞
  –≤—ã—Ö–æ–¥           ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
""")


def main():
    print("üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –∏—Å—Ç–æ—Ä–∏–µ–π")
    print("–í–≤–µ–¥–∏ '–ø–æ–º–æ—â—å' –¥–ª—è —Å–ø–∏—Å–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π\n")

    while True:
        try:
            # –ß–∏—Ç–∞–µ–º –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            –≤–≤–æ–¥ = input(">>> ").strip()
        except KeyboardInterrupt:
            print("\nüëã –ü–æ–∫–∞!")
            break

        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç–æ–π –≤–≤–æ–¥
        if not –≤–≤–æ–¥:
            continue

        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—ã
        if –≤–≤–æ–¥ == "–≤—ã—Ö–æ–¥":
            print("üëã –ü–æ–∫–∞!")
            break
        elif –≤–≤–æ–¥ == "–∏—Å—Ç–æ—Ä–∏—è":
            –ø–æ–∫–∞–∑–∞—Ç—å_–∏—Å—Ç–æ—Ä–∏—é()
        elif –≤–≤–æ–¥ == "–æ—á–∏—Å—Ç–∏—Ç—å":
            –∏—Å—Ç–æ—Ä–∏—è.clear()
            print("‚úÖ –ò—Å—Ç–æ—Ä–∏—è –æ—á–∏—â–µ–Ω–∞\n")
        elif –≤–≤–æ–¥ == "–ø–æ–º–æ—â—å":
            –ø–æ–∫–∞–∑–∞—Ç—å_–ø–æ–º–æ—â—å()
        else:
            # –°—á–∏—Ç–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            —Ä–µ–∑—É–ª—å—Ç–∞—Ç = –≤—ã—á–∏—Å–ª–∏—Ç—å(–≤–≤–æ–¥)

            # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —á–∏—Å–ª–æ ‚Äî —É–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –Ω—É–ª–∏ —É —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª
            if isinstance(—Ä–µ–∑—É–ª—å—Ç–∞—Ç, float) and —Ä–µ–∑—É–ª—å—Ç–∞—Ç.is_integer():
                —Ä–µ–∑—É–ª—å—Ç–∞—Ç = int(—Ä–µ–∑—É–ª—å—Ç–∞—Ç)

            print(f"  = {—Ä–µ–∑—É–ª—å—Ç–∞—Ç}\n")

            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é —Ç–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
            if not str(—Ä–µ–∑—É–ª—å—Ç–∞—Ç).startswith("‚ùå"):
                –∏—Å—Ç–æ—Ä–∏—è.append((–≤–≤–æ–¥, —Ä–µ–∑—É–ª—å—Ç–∞—Ç))


if __name__ == "__main__":
    main()
